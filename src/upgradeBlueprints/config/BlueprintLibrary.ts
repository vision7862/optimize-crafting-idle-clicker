import { BASE_BP } from '../helpers/blueprintObjectHelpers';
import { Blueprint } from '../types/Blueprint';

// strategy 21+10, bottom blueprint for stage 2, 3, 4, etc, and top of stage 4
const s21 = {
  b2: { ...BASE_BP, evolutionStage: 2, score: 60, scoreChangePerLevel: 6 },
  b3: { ...BASE_BP, evolutionStage: 3, score: 480, scoreChangePerLevel: 48 },
  b4: { ...BASE_BP, evolutionStage: 4, score: 4800, scoreChangePerLevel: 480 },
  t4: { ...BASE_BP, evolutionStage: 4, score: 240000, scoreChangePerLevel: 480 },
};

// strategy 51+10, bottom blueprint for stage 2, 3, 4, etc
const s51 = {
  b2: { ...BASE_BP, evolutionStage: 2, score: 120, scoreChangePerLevel: 12 },
  b3: { ...BASE_BP, evolutionStage: 3, score: 1680, scoreChangePerLevel: 168 },
  b4: { ...BASE_BP, evolutionStage: 4, score: 26880, scoreChangePerLevel: 2688 },
};

// strategy 71+10
const s71 = {
  b2: { ...BASE_BP, evolutionStage: 2, score: 160, scoreChangePerLevel: 16 },
  b3: { ...BASE_BP, evolutionStage: 3, score: 2880, scoreChangePerLevel: 288 },
  b4: { ...BASE_BP, evolutionStage: 4, score: 57600, scoreChangePerLevel: 5760 },
};

export const BLUEPRINT_LIBRARY: Blueprint[] = [
  { ...s51.b4, productName: 'Wood', upgradeLevel: 71, score: 215040 },
  { ...s21.b3, productName: 'Club', upgradeLevel: 21, score: 1440 },
  { ...s21.b4, productName: 'Arrows', score: 1080, scoreChangePerLevel: 420 },
  { ...s21.b3, productName: 'Bow', upgradeLevel: 21, score: 1440 },
  { ...s51.b3, productName: 'Rawhide', upgradeLevel: 51, score: 10080 },
  { ...s51.b3, productName: 'Leather', upgradeLevel: 41, score: 8400 },
  { ...s21.b3, productName: 'Boots', upgradeLevel: 21, score: 1440 },
  { ...s21.b2, productName: 'Hilt' },
  { ...s21.b3, productName: 'Leather Armor', upgradeLevel: 21, score: 1440 },
  { ...s51.b3, productName: 'Copper Ore', upgradeLevel: 51, score: 10080 },
  { ...s21.b4, productName: 'Copper Ingots', upgradeLevel: 31, score: 28800, scoreChangePerLevel: 720 },
  { productName: 'Copper Axe', evolutionStage: 4, upgradeLevel: 51, score: 37800, scoreChangePerLevel: 630 },
  { ...s21.b4, productName: 'Copper Blades', upgradeLevel: 31, score: 19200 },
  { ...s21.b4, productName: 'Copper Knife', upgradeLevel: 21, score: 14400 },
  { ...s21.b4, productName: 'Copper Dagger', upgradeLevel: 21, score: 15000, scoreChangePerLevel: 500 },
  { ...s51.b3, productName: 'Tin Ore', upgradeLevel: 41, score: 8400 },
  { ...s21.b4, productName: 'Bronze Ingots', upgradeLevel: 51, score: 38880, scoreChangePerLevel: 648 },
  { productName: 'Bronze Spear', evolutionStage: 3, upgradeLevel: 21, score: 1800, scoreChangePerLevel: 60 },
  { ...s21.b4, productName: 'Bronze Shield', upgradeLevel: 51, score: 28800 },
  { ...s21.b4, productName: 'Bronze Blades', upgradeLevel: 51, score: 28800 },
  { ...s21.b4, productName: 'Bronze Dagger', upgradeLevel: 51, score: 28800 },
  { ...s21.b4, productName: 'Bronze Sword', upgradeLevel: 41, score: 24000 },
  { ...s51.b2, productName: 'Coal', upgradeLevel: 41, score: 600 },
  { ...s51.b2, productName: 'Coal' },
  { ...s21.b4, productName: 'Iron Ore', upgradeLevel: 21, score: 19800, scoreChangePerLevel: 660 },
  { ...s21.b4, productName: 'Iron Ingots', upgradeLevel: 31, score: 21600, scoreChangePerLevel: 540 },
  { ...BASE_BP, productName: 'Chisel', upgradeLevel: 41, score: 50 },
  { ...s21.b4, productName: 'Iron Mace', upgradeLevel: 21, score: 14400 },
  { ...s21.b4, productName: 'Iron Rivets', upgradeLevel: 21, score: 13050, scoreChangePerLevel: 435 },
  { ...BASE_BP, productName: 'Shovel', upgradeLevel: 41, score: 50 },
  { ...s51.b2, productName: 'Lump Hammer', upgradeLevel: 51, score: 720 },
  { ...s21.b4, productName: 'Iron Helmet', upgradeLevel: 21, score: 14400 },
  { ...s21.b4, productName: 'Iron Plates', upgradeLevel: 21, score: 14400 },
  { ...s21.b4, productName: 'Imp. Leather Armor', upgradeLevel: 31, score: 21600, scoreChangePerLevel: 540 },
  { ...s21.b4, productName: 'Iron Blades', upgradeLevel: 11, score: 9600 },
  { ...s21.b4, productName: 'Iron Sword', upgradeLevel: 11, score: 10000, scoreChangePerLevel: 500 },
  { ...s21.b4, productName: 'Iron Armor', upgradeLevel: 11, score: 9600 },
  { ...s21.b4, productName: 'Iron Claymore', upgradeLevel: 11, score: 10000, scoreChangePerLevel: 500 },
  { ...s51.b2, productName: 'Gold Ore', upgradeLevel: 41, score: 600 },
  { ...s51.b2, productName: 'Gold Ingots', upgradeLevel: 41, score: 600 },
  { ...BASE_BP, productName: 'Uncut Emerald' },
  { ...BASE_BP, productName: 'Gold Ring', upgradeLevel: 51, score: 60 },
  { ...BASE_BP, productName: 'Gold Necklace' },
  { ...BASE_BP, productName: 'Steel' },
  { ...BASE_BP, productName: 'Pickaxe', upgradeLevel: 41, score: 50 },
  { ...BASE_BP, productName: 'War Hammer' },
  { ...BASE_BP, productName: 'Steel Blades', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Map', upgradeLevel: 41, score: 50 },
  { ...BASE_BP, productName: 'Katana' },
  { ...BASE_BP, productName: 'Magnificent Bow', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Magnificent Hilt' },
  { ...BASE_BP, productName: 'Magnificent Hammer' },
  { ...BASE_BP, productName: 'Magnificent Dagger', upgradeLevel: 41, score: 50 },
  { ...BASE_BP, productName: 'Magnificent Sword' },
  { ...BASE_BP, productName: 'Uncut Sapphire', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Magnificent Armor' },
  { ...s51.b2, productName: 'Mechanical Parts', upgradeLevel: 41, score: 600 },
  { ...BASE_BP, productName: 'Magnificent Crossbow', upgradeLevel: 31, score: 40 },
  { ...BASE_BP, productName: 'Sulfur', upgradeLevel: 31, score: 40 },
  { ...BASE_BP, productName: 'Bongos', upgradeLevel: 41, score: 50 },
  { ...s51.b2, productName: 'Cut Sapphire', upgradeLevel: 21, score: 360 },
  { ...BASE_BP, productName: 'Halberd' },
  { ...BASE_BP, productName: 'Microscope', upgradeLevel: 21, score: 30 },
  { ...s71.b2, productName: 'Compass', upgradeLevel: 41, score: 800 },
  { ...BASE_BP, productName: 'Clockwork', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Saltpeter', upgradeLevel: 31, score: 40 },
  { ...BASE_BP, productName: 'Gunpowder', upgradeLevel: 41, score: 50 },
  { ...s51.b2, productName: 'Saxophone', upgradeLevel: 21, score: 360 },
  { ...BASE_BP, productName: 'Electro Magnet', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Machine Parts', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Camera', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Mortar', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Stethoscope', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Musket', upgradeLevel: 31, score: 40 },
  { ...BASE_BP, productName: 'Motor Unit', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Hedge Trimmer', upgradeLevel: 31, score: 40 },
  { ...BASE_BP, productName: 'Steam Engine', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Rocket Launcher', upgradeLevel: 11, score: 20 },
  { ...BASE_BP, productName: 'Telephone', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Steam Boat', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Cannon', upgradeLevel: 11, score: 20 },
  { ...BASE_BP, productName: 'Locomotive', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Tiki Torch', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Combustion Engine', upgradeLevel: 31, score: 40 },
  { ...s51.b2, productName: 'Antenna', upgradeLevel: 11, score: 240 },
  { ...BASE_BP, productName: 'Car', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Truck', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'X-Ray Machine', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Flashlight', upgradeLevel: 11, score: 20 },
  { ...BASE_BP, productName: 'Movie Projector', upgradeLevel: 11, score: 20 },
  { ...BASE_BP, productName: 'Electric Motor', upgradeLevel: 11, score: 20 },
  { ...BASE_BP, productName: 'Monitor' },
  { ...BASE_BP, productName: 'Lawn Mower', upgradeLevel: 21, score: 30 },
  { ...BASE_BP, productName: 'Defibrillator', upgradeLevel: 11, score: 20 },
  { ...BASE_BP, productName: 'Space Probe', upgradeLevel: 11, score: 20 },
  { ...BASE_BP, productName: 'TV Set' },
  { ...BASE_BP, productName: 'Rocket', upgradeLevel: 11, score: 20 },
  { ...BASE_BP, productName: 'Microchip' },
  { ...BASE_BP, productName: 'PC' },
];

// for BPs without all details in MainWorkshop.txt, maps name to upgrade cost of when at lvl 1
export const BUILD_COST_OF_BPS_WITHOUT_DETAILS = new Map<string, number>([
  ['Hedge Trimmer', 117],
  ['Tiki Torch', 122],
  ['Lawn Mower', 127],
  ['Stethoscope', 113],
  ['X-Ray Machine', 125],
]);

// TODO: GH-4: only merge if there are excess blueprints for that product. for now, hardcode ones the algo wants that i don't have
const BPS_WITHOUT_DUPES = [
  'Wood',
  'Club',
  'Bow',
  'Boots',
  'Hilt',
  'Leather Armor',
  'Bronze Spear',
  'Chisel',
  'Shovel',
  'Lump Hammer',
  'Pickaxe',
  'Map',
  'Magnificent Dagger',
  'Bongos',
];
// TODO: set up the strategy to also allow marking a top tier at which to stop merging. for now put that here
const BPS_AT_TOP = [
  'Arrows',
  'Copper Axe',
  'Copper Blades',
  'Copper Knife',
  'Copper Dagger',
  'Bronze Ingots',
  'Bronze Shield',
  'Bronze Blades',
  'Bronze Dagger',
  'Bronze Sword',
  'Iron Ingots',
  'Iron Mace',
  'Iron Rivets',
  'Iron Helmet',
  'Iron Plates',
  'Imp. Leather Armor',
  'Iron Blades',
  'Iron Sword',
  'Iron Armor',
  'Iron Claymore',
];
export const BPS_TO_NOT_MERGE = [...BPS_WITHOUT_DUPES, ...BPS_AT_TOP];

// some blueprints should not use 51+10 strategy. they should use x+10 instead, map product name to x
export const NON_51_PLUS_10_STRATEGY = new Map<string, number>([
  ['Compass', 71],
  ['Light Bulb', 71],
  ['Gunpowder', 71],
  ['Magnificent Dagger', 71],
  ['Club', 21],
  ['Arrows', 21],
  ['Bow', 21],
  ['Boots', 21],
  ['Hilt', 21],
  ['Leather Armor', 21],
  ['Copper Ingot', 21],
  ['Copper Axe', 21],
  ['Copper Blades', 21],
  ['Copper Knife', 21],
  ['Copper Dagger', 21],
  ['Bronze Ingots', 21],
  ['Bronze Spear', 21],
  ['Bronze Shield', 21],
  ['Bronze Blades', 21],
  ['Bronze Dagger', 21],
  ['Bronze Sword', 21],
  ['Chisel', 21],
  ['Iron Mace', 21],
  ['Iron Helmet', 21],
  ['Iron Plates', 21],
  ['Imp. Leather Armor', 21],
  ['Iron Blades', 21],
  ['Iron Sword', 21],
  ['Iron Armor', 21],
  ['Iron Claymore', 21],
]);
